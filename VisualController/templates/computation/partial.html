{% extends "computation/baseDetails.html" %}

{% block menu_up %}
    <div id="talltabs-orange">
        <ul>
            <li><a href="/VisualControllerApp/comp/{{pk}}"><span>General results</span></a></li>
            <li class="active"><a href="/VisualControllerApp/computation/partial/{{pk}}"><span>Partial results</span></a></li>
            <li><a href="/VisualControllerApp/computation/configuration/{{pk}}"><span>Related Configuration</span></a></li>
        </ul>
    </div>
{% endblock %}

{% block content %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}highcharts.js" type="text/javascript"></script>

    <script>
        $(function () {
            $(document).ready(function() {
                Highcharts.setOptions({
                    global: {
                        useUTC: false
                    }
                });

                var chart;
                var time = (new Date()).getTime();
                var i,j;
                var temp = [];
                var tab = [];

                for (j=0;j<3;j++){
                    for (i = -19; i <= 0; i++) {
                        temp.push({
                            x: time + i * 1000,
                            y: Math.random()
                        });
                    }
                    tab.push(temp);
                    temp = [];
                };
                i = 0;
                chart = new Highcharts.Chart({
                    chart: {
                        renderTo: 'container',
                        type: 'spline',
                        marginRight: 10,
                        events: {
                            load: function() {

                                // set up the updating of the chart each second
                                var series = this.series[0];
                                setInterval(function() {
                                    i= (i+1) % 3;
                                    series.setData(tab[i],false);
                                   series.name = i
                                    chart.redraw();
                                }, 3000);

                            }
                        }
                    },
                    title: {
                        text: 'Partial results'
                    },
                    colors: [
                        '#f78d1d',
                        '#AA4643',
                        '#89A54E',
                        '#80699B',
                        '#3D96AE',
                        '#DB843D',
                        '#92A8CD',
                        '#A47D7C',
                        '#B5CA92'
                    ],
                    xAxis: {
                        type: 'datetime',
                        gridLineColor: "#6bbb06",
                        lineColor: "#6bbb06",
                        minorGridLineColor: "#6bbb06",
                        minorTickColor: "#6bbb06",
                        tickColor: "#6bbb06",
                        maxPadding: 0.05,
                        tickPixelInterval: 150
                    },
                    yAxis: {
                        title: {
                            text: 'Value'
                        },
                        gridLineColor: "#6bbb06",
                        lineColor: "#6bbb06",
                        minorGridLineColor: "#6bbb06",
                        minorTickColor: "#6bbb06",
                        tickColor: "#6bbb06",
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                                    Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                                    Highcharts.numberFormat(this.y, 2);
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    exporting: {
                        enabled: false
                    },
                    series: [{
                        name: 'Random data',
                        data: (function() {
                            // generate an array of random data
                            var data = [],
                                    time = (new Date()).getTime(),
                                    i;

                            for (i = -19; i <= 0; i++) {
                                data.push({
                                    x: time + i * 1000,
                                    y: Math.random()
                                });
                            }
                            return data;
                        })()
                    }]
                });
            });

        });


    </script>

    <h2>Partial results of computation</h2>
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    â€‹

{% endblock %}